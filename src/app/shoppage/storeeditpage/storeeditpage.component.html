<div class="top-text">
    <h1>Loja de Produtos Oficiais</h1>
    <p>Todos estes produtos s√£o feitos e desenhados por n√≥s do absoluto zero, impressos com as nossas impressoras 3D e enviados at√© ti tamb√©m por n√≥s! üòâ</p>
</div>
<div class="shop-cards">
    <div *ngFor="let product of products">
        <div class="item-card">
            <div class="item-image">
                <img src="{{ product.productImageUrl }}" alt="">
            </div>
            <div class="item-details">
                <nav>Nome: {{ product.name }}</nav>
                <nav>Descri√ß√£o: {{ product.description }}</nav>
                <nav>Pre√ßo: {{ product.basePrice }}‚Ç¨ /unidade</nav>
                <nav>Quantidade Dispon√≠vel: {{ product.stock }}</nav>
                <div *ngIf="user.email === '20cafesaodia@gmail.com'">
                    <br>
                    ADMIN STATS: <br>
                    <nav>ID: {{ product.id }}</nav>
                    <nav>Criado em: {{ product.createdAt }}</nav>
                    <nav>√öltima modifica√ß√£o: {{ product.updatedAt }}</nav>
                </div>
            </div>
            <nav class="item-buttons">
                <button mat-flat-button color="primary">
                    Ver
                </button>
                <button mat-flat-button color="accent">
                    Comprar
                </button>
                <button *ngIf="user.email === '20cafesaodia@gmail.com'" mat-flat-button (click)="updateForm(product)">Editar</button>
                <!-- *ngIf="authService.userData as user; then user.email === '20cafesaodia@gmail.com'" -->
                <button
                    mat-flat-button
                    color="warn"
                    [matMenuTriggerFor]="menu"
                    *ngIf="user.email === '20cafesaodia@gmail.com'"
                >
                    Apagar
                </button>
                <mat-menu #menu="matMenu">
                    <button mat-menu-item>Cancelar</button>
                    <button
                        mat-menu-item
                        style="color: red"
                        (click)="deleteProduct(product.id, product.name, product.productImagePath)"
                    >
                        APAGAR
                    </button>
                </mat-menu>
            </nav>
        </div>
    </div>
</div>
<mat-expansion-panel hideToggle style="margin: 20px;">
    <mat-expansion-panel-header>
        <mat-panel-title>
            Anunciar um novo Produto
        </mat-panel-title>
        <mat-panel-description>
            Criar um novo produto na loja (clica para abrir/fechar menu)
        </mat-panel-description>
    </mat-expansion-panel-header>
<div class="editproduct-card">
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
        Escolhe uma imagem para o produto:
        <input #productImage
            class="form-input"
            id="productImage"
            name="productImage"
            (change)="selectedFileChanged($event)"
            autocomplete="off"
            type="file"
            accept="image/*">
        Detalhes do produto
        <mat-form-field class="form-input">
            <input
                matInput
                placeholder="Nome"
                formControlName="name"
                type="text"
                required
            />
        </mat-form-field>
        <mat-form-field class="form-input">
            <textarea
                matInput
                rows="5"
                cols="100"
                placeholder="Descri√ß√£o"
                formControlName="description"
                type="text"
                required
            ></textarea>
        </mat-form-field>
        <mat-form-field class="form-input">
            <span matPrefix>‚Ç¨ </span>
            <input
                matInput
                placeholder="Pre√ßo Base (Ex: '12' ou '12,50')"
                formControlName="basePrice"
                type="number"
                required
            />
        </mat-form-field>
        <mat-form-field class="form-input">
            <input
                matInput
                placeholder="Unidades Dispon√≠veis"
                formControlName="stock"
                type="number"
                required
            />
            <nav matSuffix> unidades</nav>
        </mat-form-field>
        <button class="form-button" mat-raised-button color="primary" type="submit">
            Criar Produto
        </button>
        <button class="form-button" mat-raised-button >
            Editar Produto
        </button>
    </form>
</div>
</mat-expansion-panel>
